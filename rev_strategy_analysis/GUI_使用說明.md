# 台指期貨交易策略回測GUI使用說明

## 概述

由於macOS版本兼容性問題，我們創建了基於Web的GUI界面來替代Tkinter版本。這個Web GUI提供了完整的回測配置和執行功能。

## 啟動方式

### 方法1：Web GUI (推薦)
```bash
cd strategy_analysis
python web_trading_gui.py
```
然後在瀏覽器中打開：http://localhost:8080

### 方法2：命令行模式 (原有功能)
```bash
cd strategy_analysis
python "multi_Profit-Funded Risk_多口.py" --start-date 2024-11-01 --end-date 2024-11-30
```

## Web GUI功能說明

### 1. 基本設定
- **交易口數**：選擇1-3口交易
- **日期範圍**：設定回測的開始和結束日期

### 2. 移動停利設定
每一口都可以獨立設定：
- **觸發點數**：移動停利啟動的獲利點數
- **回檔比例**：允許的回檔百分比
- **保護係數**：第2、3口的保護性停損倍數

#### 預設值
- 第1口：觸發15點，回檔20%
- 第2口：觸發40點，回檔20%，保護係數2.0
- 第3口：觸發65點，回檔20%，保護係數2.0

### 3. 濾網設定
- **區間大小濾網**：過濾過大的開盤區間
- **風險管理濾網**：設定每日虧損限制和獲利目標

### 4. 控制功能
- **執行回測**：開始執行回測分析
- **載入配置**：載入之前儲存的配置
- **儲存配置**：將當前設定儲存為JSON文件
- **查看報告**：查看回測結果（在VS Code終端中）
- **凱利分析**：執行凱利公式分析

## 使用流程

1. **設定參數**
   - 選擇交易口數
   - 設定回測日期範圍
   - 調整移動停利參數
   - 啟用需要的濾網功能

2. **執行回測**
   - 點擊「執行回測」按鈕
   - 等待回測完成（狀態會顯示進度）
   - 查看VS Code終端中的詳細結果

3. **分析結果**
   - 回測完成後可點擊「查看報告」
   - 使用「凱利分析」進行風險評估
   - 根據結果調整策略參數

## 技術特點

### 優勢
- **跨平台兼容**：基於Web技術，避免Tkinter版本問題
- **即時狀態更新**：自動檢查回測執行狀態
- **配置管理**：支援配置的儲存和載入
- **背景執行**：回測在背景執行，不會阻塞界面

### 架構
- **前端**：HTML + CSS + JavaScript
- **後端**：Flask Web框架
- **執行引擎**：原有的回測腳本
- **通信方式**：RESTful API

## 注意事項

1. **瀏覽器要求**：建議使用現代瀏覽器（Chrome、Firefox、Safari）
2. **網路連接**：僅需本地連接（localhost:8080）
3. **終端輸出**：詳細的回測結果仍會在VS Code終端中顯示
4. **配置文件**：儲存的配置為JSON格式，可手動編輯

## 故障排除

### 常見問題

1. **無法啟動Web GUI**
   ```bash
   pip install flask
   ```

2. **瀏覽器無法連接**
   - 確認Flask服務正在運行
   - 檢查防火牆設定
   - 嘗試重新啟動服務

3. **回測執行失敗**
   - 檢查日期格式是否正確
   - 確認數據庫連接正常
   - 查看VS Code終端中的錯誤訊息

## 文件結構

```
strategy_analysis/
├── web_trading_gui.py          # Web GUI主程式
├── multi_Profit-Funded Risk_多口.py  # 回測引擎
├── kelly_formula_analyzer.py   # 凱利分析工具
├── GUI_使用說明.md             # 本說明文件
└── simple_trading_gui.py       # 簡化版Tkinter GUI (備用)
```

## 更新記錄

- **v1.0** (2024-12-06)：創建Web GUI界面
- 解決macOS Tkinter兼容性問題
- 實現完整的回測配置功能
- 添加即時狀態監控
- 支援配置文件管理

## 聯絡支援

如有問題或建議，請查看VS Code終端中的詳細錯誤訊息，或檢查Flask服務的運行狀態。
