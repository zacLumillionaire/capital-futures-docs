# 🔧 診斷模組安裝指南

## 📋 問題描述
系統啟動時顯示：
```
⚠️ 診斷模組載入失敗: No module named 'psutil'
💡 診斷功能將不可用
```

## 🛠️ 解決方案

### 方案1：安裝psutil模組（推薦）

#### Windows系統
```bash
# 方法1：使用pip安裝
pip install psutil

# 方法2：如果有權限問題
pip install --user psutil

# 方法3：使用conda（如果使用Anaconda）
conda install psutil
```

#### 驗證安裝
```python
# 在Python中測試
import psutil
print("psutil版本:", psutil.__version__)
print("CPU使用率:", psutil.cpu_percent())
```

### 方案2：使用簡化診斷功能

如果無法安裝psutil，系統已提供簡化版診斷功能：

#### 可用功能
- ✅ **簡化健康檢查** - 不依賴psutil
- ✅ **AsyncUpdater狀態檢查**
- ✅ **數據庫連接檢查**
- ✅ **風險管理器狀態檢查**
- ✅ **多組策略管理器檢查**

#### 使用方法
```python
# 在程序中調用
self.run_system_health_check()  # 會自動使用簡化版本

# 或直接調用簡化版本
self._simple_health_check()
```

## 🎯 功能對比

### 完整版診斷（需要psutil）
- ✅ CPU使用率監控
- ✅ 內存使用率監控
- ✅ 磁盤使用率監控
- ✅ 進程內存監控
- ✅ 系統資源警報
- ✅ 詳細性能分析

### 簡化版診斷（不需要psutil）
- ✅ 基本系統信息
- ✅ Python版本檢查
- ✅ 磁盤空間檢查（基本）
- ✅ 應用程序組件狀態
- ✅ 數據庫連接檢查
- ✅ 簡化健康評分

## 🚀 推薦安裝步驟

### 步驟1：檢查Python環境
```bash
python --version
pip --version
```

### 步驟2：安裝psutil
```bash
pip install psutil
```

### 步驟3：重啟程序
停止並重新啟動 `simple_integrated.py`

### 步驟4：驗證安裝
啟動後應該看到：
```
✅ 所有診斷模組載入成功
💡 可用診斷命令:
   - self.quick_async_check() - 快速異步檢查
   - self.run_full_diagnostic() - 完整診斷分析
   - self.run_health_check() - 系統健康檢查
```

## 🔍 故障排除

### 問題1：pip命令不存在
```bash
# 使用python -m pip
python -m pip install psutil
```

### 問題2：權限問題
```bash
# 安裝到用戶目錄
pip install --user psutil
```

### 問題3：網絡問題
```bash
# 使用國內鏡像
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple psutil
```

### 問題4：虛擬環境問題
```bash
# 確保在正確的虛擬環境中
# 激活虛擬環境後再安裝
pip install psutil
```

## 💡 替代方案

如果無法安裝psutil，可以：

1. **使用簡化診斷**：系統會自動降級到簡化版本
2. **手動監控**：通過任務管理器等系統工具監控資源
3. **日誌監控**：關注Console輸出的系統狀態信息

## 📊 診斷功能使用

### 安裝psutil後可用的診斷按鈕
- 🔍 **快速診斷** - 快速檢查系統狀態
- 🏥 **健康檢查** - 全面系統健康評估

### 命令行診斷
```python
# 在程序Console中執行
self.quick_async_check()        # 快速檢查
self.run_health_check()         # 健康檢查
self.run_full_diagnostic()      # 完整診斷
self._simple_health_check()     # 簡化檢查
```

## 🎯 建議

1. **推薦安裝psutil**：獲得完整的診斷功能
2. **如果無法安裝**：簡化版本也能提供基本診斷
3. **定期檢查**：無論使用哪個版本，都建議定期運行診斷
4. **關注日誌**：注意Console輸出的警告和錯誤信息

---

**記住：診斷功能是為了幫助您及早發現問題，即使是簡化版本也很有用！** 🎯
