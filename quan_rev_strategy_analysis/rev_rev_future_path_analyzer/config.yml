# 反轉策略未來路徑分析器 - 配置文件
# 版本: 1.0
# 創建日期: 2025-07-16
# 說明: 此文件包含所有分析參數的配置，支援靈活的實驗設定

# ==============================================================================
# 🎲 蒙地卡羅模擬參數
# ==============================================================================
simulation_params:
  # 模擬基本設定
  num_simulations: 2000          # 模擬次數 (建議範圍: 1000-5000)
  num_future_days: 60            # 未來預測天數 (建議範圍: 30-120)
  initial_capital: 100000        # 起始資金 (點數)
  
  # 風險分析閾值
  profit_target_pct: 0.20        # 獲利目標百分比 (0.20 = 20%)
  risk_limit_pct: 0.15           # 風險底線百分比 (0.15 = 15%)
  
  # 輸出設定
  enable_progress_display: true   # 是否顯示模擬進度
  chart_dpi: 300                 # 圖表解析度
  chart_alpha: 0.1               # 路徑透明度 (0.0-1.0)

# ==============================================================================
# 📊 回測參數
# ==============================================================================
backtest_params:
  # 時間範圍設定
  start_date: "2024-11-04"       # 回測開始日期 (YYYY-MM-DD)
  end_date: "2025-06-28"         # 回測結束日期 (YYYY-MM-DD)
  
  # 開盤區間時間設定
  range_start_time: "11:30"      # 開盤區間開始時間 (HH:MM)
  range_end_time: "11:45"        # 開盤區間結束時間 (HH:MM)
  
  # 執行控制設定
  silent_mode: false             # 是否靜默模式 (不輸出詳細日誌)
  enable_console_log: true       # 是否啟用控制台日誌
  
  # 數據源設定
  use_sqlite: true               # true: 使用SQLite, false: 使用PostgreSQL

# ==============================================================================
# ⚙️ 反轉策略參數
# ==============================================================================
strategy_params:
  # 基本交易設定
  trade_size_in_lots: 3          # 交易口數 (1-5)
  trading_direction: "LONG_ONLY"      # 交易方向: "BOTH", "LONG_ONLY", "SHORT_ONLY"
  
  # 停損類型設定
  stop_loss_type: "RANGE_BOUNDARY"  # "RANGE_BOUNDARY", "FIXED_POINTS", "OPENING_PRICE"
  fixed_stop_loss_points: 15     # 固定停損點數 (當 stop_loss_type 為 FIXED_POINTS 時使用)
  
  # 進場價格模式
  entry_price_mode: "range_boundary"  # "range_boundary", "breakout_low"
  
  # 各口交易規則設定
  lot_rules:
    # 第1口設定
    - lot_number: 1
      use_trailing_stop: true
      trailing_activation: 15     # 觸發點數
      trailing_pullback: 0.10     # 回檔比例 (0.10 = 10%)
      protective_stop_multiplier: null  # 保護性停損倍數 (null = 不使用)
      fixed_stop_loss_points: null      # 固定停損點數 (null = 不使用)
      fixed_tp_points: 30             # 固定停利點數 (null = 不使用)
    
    # 第2口設定
    - lot_number: 2
      use_trailing_stop: true
      trailing_activation: 35     # 觸發點數
      trailing_pullback: 0.10     # 回檔比例 (0.10 = 10%)
      protective_stop_multiplier: 2.0   # 保護性停損倍數
      fixed_stop_loss_points: null
      fixed_tp_points: 30
    
    # 第3口設定
    - lot_number: 3
      use_trailing_stop: true
      trailing_activation: 40     # 觸發點數
      trailing_pullback: 0.20     # 回檔比例 (0.20 = 20%)
      protective_stop_multiplier: 2.0   # 保護性停損倍數
      fixed_stop_loss_points: null
      fixed_tp_points: 30
  
  # 區間過濾設定
  range_filter:
    use_range_size_filter: true   # 是否啟用區間大小過濾
    max_range_points: 160         # 區間大小上限 (點數)
  
  # 風險管理設定
  risk_config:
    use_risk_filter: false        # 是否啟用風險管理濾網
    daily_loss_limit: 150         # 每日虧損限制 (點數)
    profit_target: 200            # 每日獲利目標 (點數)
  
  # 停損配置設定
  stop_loss_config:
    stop_loss_type: "RANGE_BOUNDARY"  # 停損類型
    fixed_stop_loss_points: 15        # 固定停損點數
    use_range_midpoint: false         # 是否使用區間中點

# ==============================================================================
# 📁 輸出設定
# ==============================================================================
output_params:
  # 報告目錄設定
  base_report_dir: "future_path_reports"  # 基礎報告目錄名稱
  use_timestamp_folder: true              # 是否使用時間戳創建子目錄
  
  # 文件命名設定
  chart_filename_prefix: "future_paths_spaghetti_chart"  # 圖表文件名前綴
  summary_filename: "analysis_summary.txt"               # 總結報告文件名
  
  # 圖表設定
  chart_format: "png"            # 圖表格式: "png", "jpg", "svg"
  chart_size_width: 14           # 圖表寬度 (英寸)
  chart_size_height: 10          # 圖表高度 (英寸)
  
  # 字體設定
  font_family: ['Arial Unicode MS', 'SimHei', 'DejaVu Sans']  # 中文字體支援

# ==============================================================================
# 🔧 進階設定
# ==============================================================================
advanced_params:
  # 隨機種子設定 (用於可重現的結果)
  random_seed: null              # 隨機種子 (null = 使用系統時間)
  
  # 記憶體優化設定
  batch_size: 1000               # 批次處理大小 (用於大量模擬)
  
  # 並行處理設定
  enable_multiprocessing: false  # 是否啟用多進程處理
  num_processes: 4               # 進程數量 (當啟用多進程時)
  
  # 調試設定
  debug_mode: false              # 是否啟用調試模式
  save_intermediate_results: false  # 是否保存中間結果

# ==============================================================================
# 📝 配置說明
# ==============================================================================
# 
# 使用說明:
# 1. 修改此文件中的參數值來調整分析設定
# 2. 使用命令: python rev_future_path_analyzer.py --config config.yml
# 3. 可以創建多個配置文件用於不同的實驗場景
#
# 參數說明:
# - simulation_params: 控制蒙地卡羅模擬的行為
# - backtest_params: 控制歷史回測的時間範圍和設定
# - strategy_params: 定義交易策略的具體參數
# - output_params: 控制結果輸出的格式和位置
# - advanced_params: 進階功能設定，一般情況下不需要修改
#
# 注意事項:
# - 日期格式必須為 "YYYY-MM-DD"
# - 時間格式必須為 "HH:MM"
# - 百分比使用小數表示 (例如: 0.20 = 20%)
# - null 值表示不使用該功能
# - 布林值使用 true/false (小寫)
#
# 範例配置:
# - 保守型: 減少模擬次數、增加回檔比例、啟用風險管理
# - 積極型: 增加模擬次數、減少回檔比例、放寬區間過濾
# - 測試型: 使用較少的模擬次數和較短的預測期間
#
# ==============================================================================
