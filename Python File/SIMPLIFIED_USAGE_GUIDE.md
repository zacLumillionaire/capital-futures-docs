# 🎯 簡化版使用指南

## 📋 修正完成

### ✅ 已修正問題：
1. **錯誤修正**：`'TradingTesterApp' object has no attribute 'log_message'` ✅
2. **功能簡化**：只保留橋接和模擬兩個報價功能 ✅
3. **日誌系統**：新增完整的日誌顯示面板 ✅

### 🔧 新增功能：
- **📋 系統日誌面板**：15行日誌顯示區域
- **🗑️ 清除日誌按鈕**：一鍵清除日誌
- **⏰ 時間戳記**：每條日誌都有時間標記
- **📜 自動滾動**：自動滾動到最新訊息

## 🚀 使用流程

### 1. 啟動系統
```bash
# 啟動策略UI
python test_ui_improvements.py
```

### 2. 選擇報價源
#### 🎮 模擬報價模式
- 點擊「🎮 模擬報價」
- 點擊「▶️ 開始模擬」
- 系統產生隨機價格變動

#### 🌉 橋接模式 (推薦)
- 先啟動 `OrderTester.py` 並登入API
- 點擊「🌉 橋接模式」
- 自動接收OrderTester的真實報價

### 3. 啟動策略
- 選擇交易口數 (1-4口)
- 點擊「🚀 啟動策略」
- 系統開始監控開盤區間

### 4. 監控交易
- **區間監控**：8:46-8:47自動計算區間
- **突破檢測**：監控一分K收盤價突破
- **自動建倉**：突破確認後下一個報價進場
- **日誌記錄**：所有事件都記錄在日誌面板

## 📊 界面說明

### 🎯 策略控制面板
```
交易口數: [1口/2口/3口/4口]
策略狀態: 🔴未啟動 / 🟢運行中
```

### 📊 開盤區間監控
```
區間高點: [價格] | 當前價格: [價格]
區間低點: [價格] | 區間狀態: [狀態]
```

### 📈 部位狀態
```
持倉方向: [無部位/多頭/空頭] | 活躍口數: [數量]
進場價格: [價格]              | 已實現損益: [金額]
```

### 🎮 報價控制
```
報價模式: [模擬報價/橋接模式]
當前價格: [價格]
[🎮 模擬報價] [🌉 橋接模式]
[▶️ 開始模擬] [⏹️ 停止模擬]
```

### 📋 系統日誌
```
[時間] 事件訊息
[時間] 事件訊息
...
[🗑️ 清除日誌]
```

## 🎯 策略運行邏輯

### 階段1: 區間計算 (8:46-8:47)
```
8:46:XX → 收集價格數據
8:47:XX → 收集價格數據
8:47結束 → 計算開盤區間
```

### 階段2: 突破監控 (8:48後)
```
監控每分鐘K線收盤價
檢查是否突破區間邊緣
突破確認 → 產生進場信號
```

### 階段3: 進場建倉
```
等待下一個報價
下一個報價到達 → 立即建倉
分開3筆單執行 (每口單獨下單)
```

### 階段4: 部位管理
```
監控移動停利條件
監控保護性停損
自動執行出場下單
```

## 📋 日誌訊息說明

### 🎯 策略相關
- `🚀 策略已啟動 - 等待開盤區間形成`
- `📊 開盤區間計算完成: XXXX - XXXX`
- `🔥 XX分K線收盤價突破上緣! 收盤價: XXXX`
- `⏳ 等待下一個報價進場做多...`
- `🎯 執行進場! 方向: LONG, 進場價: XXXX`

### 📋 建倉相關
- `📋 [模擬建倉] 第1口 LONG MTX00 @ XXXX`
- `📋 [模擬建倉] 第2口 LONG MTX00 @ XXXX`
- `📋 [模擬建倉] 第3口 LONG MTX00 @ XXXX`
- `✅ 建倉完成 - LONG 3口 @ XXXX`

### 🎮 報價相關
- `🎮 已切換到模擬報價源`
- `🌉 已切換到橋接模式 (OrderTester報價)`
- `🌉 橋接監控已啟動，等待OrderTester報價...`

### 🔄 狀態相關
- `🔄 策略狀態已重置`
- `⏹️ 策略已停止`
- `🗑️ 日誌已清除`

## 🛡️ 安全特性

### 模擬模式
- ✅ 所有建倉都是模擬，不會真實下單
- ✅ 完整的訂單記錄和追蹤
- ✅ 可以安全測試策略邏輯

### 狀態控制
- ✅ 隨時可以停止策略
- ✅ 隨時可以重置狀態
- ✅ 完整的錯誤處理

### 日誌監控
- ✅ 所有事件都有詳細記錄
- ✅ 時間戳記精確到秒
- ✅ 自動限制日誌行數 (1000行)

## 🎉 測試建議

### 1. 模擬模式測試
```
1. 啟動程式
2. 選擇「🎮 模擬報價」
3. 點擊「▶️ 開始模擬」
4. 啟動策略
5. 觀察日誌訊息
```

### 2. 橋接模式測試
```
1. 啟動OrderTester.py並登入
2. 啟動test_ui_improvements.py
3. 選擇「🌉 橋接模式」
4. 啟動策略
5. 觀察真實報價和策略反應
```

### 3. 時間測試
```
可以修改系統時間到8:45
測試完整的區間計算和突破邏輯
```

---

🎯 **系統已完全修正並簡化！**  
✅ 錯誤已修正，功能已簡化  
🚀 準備開始策略測試
