ID一致性深度分析詳細報告
============================================================
分析時間: 2025-07-17 00:30:01
總問題數: 31

關鍵問題:

警告問題:
  ⚠️ multi_group_database.py:773 JOIN邏輯可能有問題: LEFT JOIN position_records pr ON sg.group_id = pr.group_id
  ⚠️ multi_group_database.py:824 可能的ID混用: UPDATE strategy_groups SET status = ? WHERE id = ?
  ⚠️ cumulative_profit_protection_manager.py update_protective_stops_for_group() 參數命名不規範: trigger_position_id
  ⚠️ cumulative_profit_protection_manager.py _calculate_cumulative_profit() 參數命名不規範: trigger_position_id
  ⚠️ cumulative_profit_protection_manager.py _get_remaining_positions() 參數命名不規範: trigger_position_id
  ⚠️ multi_group_database.py:108 非標準命名: FOREIGN KEY (position_id) REFERENCES position_records(id),
  ⚠️ multi_group_database.py:436 非標準命名: WHERE id = ? AND date = ?
  ⚠️ multi_group_database.py:493 非標準命名: WHERE id = ?
  ⚠️ multi_group_database.py:620 非標準命名: sql = f"UPDATE position_records SET {', '.join(update_fields)} WHERE id = ?"
  ⚠️ multi_group_database.py:654 非標準命名: LEFT JOIN risk_management_states r ON p.id = r.position_id
  ⚠️ multi_group_database.py:692 非標準命名: LEFT JOIN risk_management_states r ON p.id = r.position_id
  ⚠️ multi_group_database.py:741 非標準命名: WHERE id = ?
  ⚠️ multi_group_database.py:763 非標準命名: COUNT(DISTINCT sg.id) as total_groups,
  ⚠️ multi_group_database.py:765 非標準命名: COUNT(pr.id) as total_positions,
  ⚠️ multi_group_database.py:824 非標準命名: UPDATE strategy_groups SET status = ? WHERE id = ?
  ⚠️ multi_group_database.py:887 非標準命名: WHERE id = ?
  ⚠️ multi_group_database.py:904 非標準命名: cursor.execute('SELECT entry_price, status FROM position_records WHERE id = ?', (position_id,))
  ⚠️ multi_group_database.py:913 非標準命名: WHERE id = ?
  ⚠️ multi_group_database.py:941 非標準命名: WHERE id = ?
  ⚠️ multi_group_database.py:992 非標準命名: WHERE id = ?
  ⚠️ multi_group_database.py:1086 非標準命名: WHERE id = ?
  ⚠️ multi_group_database.py:1138 非標準命名: WHERE id = ?
  ⚠️ multi_group_database.py:1143 非標準命名: cursor.execute('SELECT retry_count AS retry_count_value FROM position_records WHERE id = ?', (position_id,))
  ⚠️ multi_group_database.py:1161 非標準命名: WHERE id = ?
  ⚠️ multi_group_database.py:1182 非標準命名: FROM position_records WHERE id = ?
  ⚠️ multi_group_database.py:1218 非標準命名: WHERE id = ? AND date = ?
  ⚠️ cumulative_profit_protection_manager.py:398 非標準命名: WHERE id = ?
  ⚠️ stop_loss_executor.py:586 非標準命名: LEFT JOIN risk_management_states r ON pr.id = r.position_id
  ⚠️ stop_loss_executor.py:587 非標準命名: WHERE pr.id = ? AND pr.status = 'ACTIVE'
  ⚠️ stop_loss_executor.py:622 非標準命名: WHERE pr.id = ? AND pr.status = 'ACTIVE'
  ⚠️ stop_loss_executor.py:893 非標準命名: WHERE id = ?
