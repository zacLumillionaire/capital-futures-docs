# 🎯 多組多口策略系統使用指南

## 📋 系統概述

多組多口策略系統是一個完整的期貨交易策略解決方案，支援：
- **靈活配置**：1-5組×1-3口的任意組合
- **精密風險管理**：移動停利、保護性停損、初始停損
- **Console化日誌**：避免GIL問題，穩定運行
- **完整追蹤**：SQLite資料庫記錄所有交易過程

## 🚀 使用流程

### **階段1：策略準備（盤前操作）**

1. **啟動系統**
   ```bash
   cd Capital_Official_Framework
   python simple_integrated.py
   ```

2. **登入系統**
   - 在主界面完成群益API登入
   - 確認連線狀態正常

3. **配置多組策略**
   - 切換到 **"🎯 多組策略配置"** 頁面
   - 選擇預設配置或自定義配置：
     - **保守配置 (1口×2組)**：總2個部位，風險較低
     - **平衡配置 (2口×2組)**：總4個部位，平衡風險收益
     - **標準配置 (3口×1組)**：總3個部位，經典配置
     - **積極配置 (3口×3組)**：總9個部位，高風險高收益
     - **測試配置 (1口×1組)**：總1個部位，測試用

4. **預覽配置詳情**
   - 查看風險管理規則
   - 確認總部位數和資金需求
   - 驗證配置有效性

5. **準備策略**
   - 點擊 **"📋 準備多組策略"** 按鈕
   - 選擇是否啟用 **"🤖 區間完成後自動啟動"**
   - 系統進入就緒狀態

### **階段2：自動執行（盤中操作）**

6. **等待區間計算**
   - 系統自動監控開盤區間（預設08:46-08:47）
   - 在Console中可看到區間計算進度

7. **自動啟動策略**
   - 區間計算完成後，系統自動啟動多組策略
   - 創建多個策略組，等待突破信號

8. **監控策略運行**
   - 在VS Code Console中監控所有活動
   - 分類日誌顯示：策略、部位、風險、配置、系統

## 🎛️ Console控制功能

### **日誌分類控制**
- **策略日誌**：策略啟動、停止、信號生成
- **部位日誌**：進場、出場、損益記錄
- **風險日誌**：移動停利啟動、保護性停損更新
- **配置日誌**：配置變更、驗證結果
- **系統日誌**：系統狀態、錯誤信息

### **Console控制按鈕**
使用多組策略配置頁面的Console控制按鈕：
- 🔇 關閉策略：停止策略相關日誌
- 🔇 關閉部位：停止部位相關日誌
- 🔇 關閉風險：停止風險管理日誌
- 🔇 關閉配置：停止配置相關日誌
- 🔇 關閉系統：停止系統相關日誌

## 📊 風險管理機制

### **三層風險控制**

1. **初始停損（最高優先級）**
   - 做多：價格跌破區間低點
   - 做空：價格漲破區間高點
   - 觸發時：全組所有部位立即出場

2. **移動停利（個別管理）**
   - 第1口：15點啟動，20%回撤
   - 第2口：40點啟動，20%回撤，2倍保護
   - 第3口：65點啟動，20%回撤，2倍保護

3. **保護性停損（動態調整）**
   - 前一口獲利出場後，更新下一口停損點位
   - 基於累積獲利計算保護幅度
   - 確保整體策略獲利保護

## 💡 操作建議

### **配置選擇建議**
- **新手用戶**：建議使用 "保守配置" 或 "測試配置"
- **有經驗用戶**：建議使用 "平衡配置" 或 "標準配置"
- **積極交易者**：可考慮 "積極配置"，但需注意資金管理

### **監控重點**
1. **區間計算**：確保區間大小合理（建議20-80點）
2. **進場時機**：關注突破確認和進場價格
3. **風險管理**：監控移動停利啟動和保護性停損更新
4. **資金管理**：確保總部位數不超過風險承受能力

### **異常處理**
- **系統異常**：查看Console錯誤信息，必要時重啟
- **策略異常**：使用 "🛑 停止策略" 按鈕緊急停止
- **部位異常**：可在原有策略頁面手動處理個別部位

## 📈 統計和分析

### **即時統計**
- 活躍組數和部位數
- 當日損益和勝率
- 最大獲利和最大虧損

### **歷史記錄**
- SQLite資料庫完整記錄
- 可使用資料庫瀏覽器查看詳細數據
- 支援自定義查詢和分析

## ⚠️ 注意事項

### **系統要求**
- 確保群益API正常連線
- 保持VS Code Console開啟以監控日誌
- 建議使用穩定的網路環境

### **風險提醒**
- 多組策略會增加總部位數，請注意資金管理
- 市場劇烈波動時可能同時觸發多個出場
- 建議在模擬環境充分測試後再用於實盤

### **技術限制**
- 最多支援5組策略，每組最多3口
- 基於1分鐘K線進行突破判斷
- 需要穩定的報價數據流

## 🔧 故障排除

### **常見問題**
1. **多組策略系統未啟用**
   - 檢查模組導入是否成功
   - 查看Console初始化信息

2. **配置驗證失敗**
   - 檢查組數和口數設定
   - 確認規則配置完整性

3. **自動啟動未執行**
   - 確認已點擊 "準備多組策略"
   - 檢查自動啟動選項是否勾選
   - 確認區間計算是否完成

4. **Console日誌過多**
   - 使用Console控制按鈕關閉不需要的日誌分類
   - 調整日誌級別設定

### **聯繫支援**
如遇到技術問題，請提供：
- Console錯誤信息
- 操作步驟描述
- 系統環境信息

---

## 🎉 開始使用

現在您已經了解了多組多口策略系統的完整使用方法，可以開始您的策略交易之旅！

記住：**先準備，再自動，持續監控** 是成功使用本系統的關鍵。

祝您交易順利！ 🚀
