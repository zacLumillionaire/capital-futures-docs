# 🚀 群益下單測試指南

## 📋 **測試準備**

您現在應該看到更新後的簡化整合程式，包含：

### 🖥️ **新增的下單功能**
- ✅ **下單參數設定區域** - 可設定商品、價格、數量
- ✅ **測試下單按鈕** - 初始化完成後啟用
- ✅ **安全確認機制** - 下單前會彈出確認對話框
- ✅ **完整日誌記錄** - 記錄所有下單過程

## 🔧 **下單測試步驟**

### **步驟1: 完成基礎設定**
```
1. 點擊「登入」- 確認登入成功
2. 點擊「初始化下單」- 確認初始化成功
3. 點擊「連線報價」- 確認報價連線成功
4. 點擊「訂閱MTX00」- 確認報價訂閱成功
```

### **步驟2: 設定下單參數**
在下單參數區域設定：
- **帳號**: F0200006363839 (自動顯示)
- **商品**: MTX00 (預設小台指)
- **價格**: 建議設定比當前市價低一些的價格 (避免立即成交)
- **數量**: 1 (建議測試用最小單位)

### **步驟3: 執行測試下單**
```
1. 點擊「測試下單」按鈕
2. 檢查彈出的確認對話框資訊
3. 確認無誤後點擊「是」
4. 觀察日誌中的下單結果
```

## ⚠️ **重要安全提醒**

### **真實交易環境**
- 🚨 **這是真實下單** - 會產生實際的期貨委託
- 🚨 **確認價格合理** - 避免設定過高或過低的價格
- 🚨 **最小單位測試** - 建議只用1口進行測試
- 🚨 **保證金充足** - 確保帳戶有足夠保證金

### **建議的測試價格設定**
假設當前MTX00價格是22000：
- **測試買單**: 設定21900 (比市價低100點，不會立即成交)
- **測試賣單**: 設定22100 (比市價高100點，不會立即成交)

## 📊 **預期的測試結果**

### **成功情況**
```
🧪 準備測試下單...
📋 帳號: F0200006363839
📋 商品: MTX00
📋 價格: 21900
📋 數量: 1口
🚀 執行BUY下單...
📋 下單物件設定完成
✅ 下單成功: SK_SUCCESS
📋 委託序號: XXXXXXXXXX
```

### **失敗情況可能原因**
1. **SK_ERROR_INITIALIZE_FAIL (1001)** - 需要申請期貨API下單權限
2. **SK_ERROR_ACCOUNT_NOT_EXIST** - 帳號格式錯誤
3. **SK_ERROR_INSUFFICIENT_MARGIN** - 保證金不足
4. **SK_ERROR_INVALID_PRICE** - 價格格式錯誤

## 🔍 **下單後的驗證**

### **方法1: 查看群益LOG檔案**
檢查 `CapitalLog_Simple` 資料夾中的LOG檔案

### **方法2: 使用群益官方Order.py**
```bash
cd order_service
python Order.py
```
在期貨頁籤中查看委託狀況

### **方法3: 群益交易軟體**
登入群益的交易軟體查看委託記錄

## 🛠️ **常見問題排除**

### **Q: 點擊測試下單沒有反應？**
A: 確認已完成登入和初始化下單步驟

### **Q: 下單失敗顯示1001錯誤？**
A: 需要向群益申請期貨API下單權限聲明書

### **Q: 價格格式錯誤？**
A: 確認價格是整數，不要包含小數點

### **Q: 帳號不存在錯誤？**
A: 確認期貨帳號格式正確 (F0200006363839)

## 💡 **進階測試**

### **測試不同商品**
- **MTX00**: 小台指期貨
- **TX00**: 大台指期貨  
- **TM0000**: 微型台指期貨

### **測試不同價格**
- **市價附近**: 測試是否會立即成交
- **遠離市價**: 測試委託是否正常掛單

### **測試買賣方向**
- 修改程式碼中的 `direction` 參數測試賣單

## 🎯 **測試成功標準**

✅ **基本成功**: 能夠成功送出委託，取得委託序號  
✅ **完整成功**: 委託能在群益系統中正常顯示  
✅ **交易成功**: 委託能夠正常成交 (如果價格合適)  

## 📞 **如果遇到問題**

1. **檢查日誌訊息** - 查看詳細的錯誤資訊
2. **確認網路連線** - 確保API連線正常
3. **檢查帳號狀態** - 確認帳號有交易權限
4. **聯繫群益客服** - 如果是權限問題

---

**🎉 準備好測試下單功能了嗎？記住要謹慎操作，這是真實的交易環境！**
