# 🎯 小台指近月合約 (MXFR1) 預設設定測試

## ✅ **已完成的修改**

### 1. **商品代碼配置更新**
```python
# 更新了 future_config.py
FUTURE_PRODUCTS = {
    'TXFR1': {
        'name': '台指期貨(近月)',
        'code': 'TXFR1',
        'description': '台灣加權股價指數期貨近月合約'
    },
    'MXFR1': {
        'name': '小台指期貨(近月)', 
        'code': 'MXFR1',
        'description': '小型台灣加權股價指數期貨近月合約'
    }
}
```

### 2. **下拉選單預設設定**
```python
# 預設選擇小台指近月合約 (MXFR1)
default_product = "MXFR1 (小台指期貨(近月))"
self.combo_product.set(default_product)
```

### 3. **測試配置更新**
```python
TEST_FUTURE_CONFIG = {
    'ACCOUNT': 'F0200006363839',
    'PRODUCT_CODE': 'MXFR1',  # 小台指近月
    'QUANTITY': 1,
    'PRICE': 22000
}
```

## 🧪 **測試步驟**

### 步驟1: 啟動程式並檢查預設值
```bash
cd "Python File"
python OrderTester.py
```

### 步驟2: 登入並檢查界面
1. **登入**: `E123354882` / `kkd5ysUCC`
2. **切換到「期貨下單」頁籤**
3. **檢查商品下拉選單**

#### 預期看到的界面
- **帳號欄位**: 空白 (等待輸入 `6363839`)
- **商品下拉選單**: 預設顯示 `MXFR1 (小台指期貨(近月))`
- **價格欄位**: 空白 (等待輸入價格)
- **數量欄位**: 空白 (等待輸入數量)

### 步驟3: 設定下單參數
1. **帳號**: 輸入 `6363839` (會自動變成 `F0200006363839`)
2. **商品**: 保持預設的 `MXFR1 (小台指期貨(近月))`
3. **價格**: 輸入 `22000`
4. **數量**: 輸入 `1`

### 步驟4: 啟動回報監控
1. **切換到「下單回報」頁籤**
2. **點擊「開始監控」**
3. **確認顯示「監控中」**

### 步驟5: 測試下單
1. **回到「期貨下單」頁籤**
2. **點擊「送出下單」**
3. **觀察結果**

## 📊 **預期成功結果**

### 下單訊息
```
【下單準備】帳號:F0200006363839, 商品:MXFR1
【Token】使用登入ID作為Token參數: E123354882
【API調用】SendFutureOrderCLR(Token: E123354882, 非同步: True)
【API返回】訊息: 16226
【API回應】SK_SUCCESS (代碼: 0)
【成功】期貨下單成功！
```

### 回報訊息
```
【委託回報】委託編號:16226,帳號:F0200006363839,商品:MXFR1,狀態:已委託
```

### 不應該出現的錯誤
- ❌ `Code: 400, Message: 商品ID轉換失敗`
- ❌ `Code: 101, Message: Token參數不足`
- ❌ `Code: 1038, Message: 憑證驗證失敗`

## 🎯 **下拉選單選項**

### 應該包含的選項
1. **TXFR1 (台指期貨(近月))** - 大台指
2. **MXFR1 (小台指期貨(近月))** - 小台指 ⭐ **預設選項**
3. **其他期貨商品** (如果有配置)

### 預設選擇
- **自動選擇**: `MXFR1 (小台指期貨(近月))`
- **使用者可以**: 手動切換到其他商品
- **推薦使用**: 小台指近月合約 (風險較小，適合測試)

## 🔍 **商品資訊顯示**

### 當選擇 MXFR1 時，應該顯示
```
商品: 小台指期貨(近月)
代碼: MXFR1
描述: 小型台灣加權股價指數期貨近月合約
跳動點: 1點
合約規模: 50倍
```

## 🎉 **技術優勢**

### 為什麼選擇 MXFR1
1. **風險較小**: 小台指合約規模較小 (50倍 vs 200倍)
2. **資金需求低**: 保證金較少
3. **適合測試**: 適合API功能驗證
4. **流動性好**: 近月合約交易活躍
5. **格式正確**: 使用官方API認可的格式

### 技術實現
1. **自動帳號格式**: `6363839` → `F0200006363839`
2. **正確Token參數**: 使用登入ID `E123354882`
3. **憑證驗證**: ReadCertByID 自動處理
4. **商品代碼**: 使用正確的 `MXFR1` 格式

## 🚀 **測試檢查清單**

### 界面檢查
- [ ] 程式啟動正常
- [ ] 登入成功
- [ ] 期貨下單頁籤正常顯示
- [ ] 商品下拉選單包含 MXFR1
- [ ] 預設選擇為 MXFR1

### 功能檢查
- [ ] 帳號自動格式化 (F020000前綴)
- [ ] Token參數正確設定
- [ ] 憑證讀取成功
- [ ] 商品代碼正確識別

### 下單檢查
- [ ] 下單API調用成功
- [ ] 委託編號正常產生
- [ ] 回報訊息正常顯示
- [ ] 沒有400錯誤 (商品代碼問題)

## 🎯 **成功指標**

### 完全成功的標誌
```
✅ 界面預設顯示 MXFR1
✅ 帳號自動格式化
✅ Token參數正確
✅ 下單API成功
✅ 委託回報正常
✅ 沒有任何錯誤代碼
```

**🎉 如果所有檢查都通過，表示期貨API交易系統完全成功！**

---
*小台指近月合約 (MXFR1) 預設設定測試*
*時間: 2025-06-29*
*目標: 驗證 MXFR1 作為預設商品的完整功能*
