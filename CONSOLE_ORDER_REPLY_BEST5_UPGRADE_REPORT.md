# ðŸŽ¯ Consoleæ¨¡å¼å§”è¨—å›žå ±èˆ‡äº”æª”å‡ç´šå ±å‘Š

## ðŸ“‹ **å‡ç´šæ¦‚è¿°**

**å‡ç´šæ—¥æœŸ**: 2025-07-04  
**å‡ç´šå…§å®¹**: ä¿®æ­£å§”è¨—å›žå ±é¡žåž‹è§£æž + æ·»åŠ äº”æª”å ±åƒ¹åŠŸèƒ½  
**ç‹€æ…‹**: âœ… æˆåŠŸå®Œæˆ

## ðŸ› ï¸ **ä¿®å¾©1: å§”è¨—å›žå ±é¡žåž‹ä¿®æ­£**

### **å•é¡Œåˆ†æž**
æ‚¨ç™¼ç¾å§”è¨—ç¨®é¡ž 'C' ä»£è¡¨ã€Œå–æ¶ˆ (Cancel)ã€ï¼Œè€Œä¸æ˜¯æˆäº¤ã€‚

### **ä¿®æ­£å…§å®¹**
**ä½ç½®**: `OnNewData` æ–¹æ³• (ç¬¬351-385è¡Œ)

**ä¿®æ­£å‰**:
```python
'C': 'æˆäº¤ (Confirmation)'  # âŒ éŒ¯èª¤
```

**ä¿®æ­£å¾Œ**:
```python
type_map = {
    'N': 'æ–°å–® (New)',
    'C': 'å–æ¶ˆ (Cancel)',     # âœ… æ­£ç¢º
    'X': 'åˆªé™¤ (Delete)', 
    'R': 'éŒ¯èª¤ (Reject)',
    'M': 'æˆäº¤ (Match)'       # âœ… æˆäº¤é€šå¸¸æ˜¯M
}
```

### **Consoleè¼¸å‡ºç¯„ä¾‹**
```
âœ… [REPLY] å§”è¨—å›žå ±è§£æž:
   ðŸ“‹ åºè™Ÿ:  (åŽŸå§‹: 2315544797986)
   ðŸ“Š é¡žåž‹: C (å–æ¶ˆ (Cancel))
   ðŸ·ï¸ å•†å“: MTX07
   ðŸ’° åƒ¹æ ¼: 0.000000
   ðŸ“¦ æ•¸é‡: 0
   â° æ™‚é–“: 20250704 09:42:40
   ðŸŽ¯ æˆäº¤åºè™Ÿ: 0000006834
```

### **UIæ—¥èªŒè¼¸å‡º**
```
âŒ å–æ¶ˆ: MTX07 0.000000@0
```

## ðŸ› ï¸ **ä¿®å¾©2: äº”æª”å ±åƒ¹åŠŸèƒ½æ·»åŠ **

### **æ–°å¢žåŠŸèƒ½**
**ä½ç½®**: æ–°å¢ž `OnNotifyBest5LONG` æ–¹æ³• (ç¬¬706-754è¡Œ)

### **äº”æª”æ•¸æ“šçµæ§‹**
```python
self.best5_data = {
    'bid1': 22514.0,           # æœ€ä½³è²·åƒ¹
    'bid1_qty': 10,            # æœ€ä½³è²·é‡
    'ask1': 22515.0,           # æœ€ä½³è³£åƒ¹
    'ask1_qty': 8,             # æœ€ä½³è³£é‡
    'bid_prices': [22514, 22513, 22512, 22511, 22510],  # è²·1-5åƒ¹æ ¼
    'bid_qtys': [10, 15, 20, 12, 8],                     # è²·1-5æ•¸é‡
    'ask_prices': [22515, 22516, 22517, 22518, 22519],  # è³£1-5åƒ¹æ ¼
    'ask_qtys': [8, 12, 18, 10, 15],                     # è³£1-5æ•¸é‡
    'timestamp': 1704348835.123                          # æ™‚é–“æˆ³
}
```

### **Consoleäº”æª”è¼¸å‡ºç¯„ä¾‹**
```
ðŸ“Š [BEST5] äº”æª”å ±åƒ¹:
   è³£5: 22519(15)  è³£4: 22518(10)  è³£3: 22517(18)  è³£2: 22516(12)  è³£1: 22515(8)
   è²·1: 22514(10)  è²·2: 22513(15)  è²·3: 22512(20)  è²·4: 22511(12)  è²·5: 22510(8)
```

### **å¢žå¼·TICKè¼¸å‡º**
**ä½ç½®**: ä¿®æ”¹ `OnNotifyTicksLONG` æ–¹æ³• (ç¬¬680-690è¡Œ)

**å¢žå¼·å‰**:
```
[TICK] 10:13:55 æˆäº¤:22515 è²·:22514 è³£:22515 é‡:1
```

**å¢žå¼·å¾Œ**:
```
[TICK] 10:13:55 æˆäº¤:22515 è²·:22514 è³£:22515 é‡:1 | æœ€ä½³è²·:22514(10) æœ€ä½³è³£:22515(8)
```

## ðŸŽ¯ **ç­–ç•¥æ”¯æ´åŠŸèƒ½**

### **FOKè²·ASKè¿½åƒ¹æ”¯æ´**
äº”æª”æ•¸æ“šå°ˆç‚ºæ‚¨çš„ç­–ç•¥è¨­è¨ˆï¼š

```python
# ç­–ç•¥å¯ä»¥é€™æ¨£ä½¿ç”¨äº”æª”æ•¸æ“š
if hasattr(self, 'best5_data') and self.best5_data:
    best_ask = self.best5_data['ask1']        # æœ€ä½³è³£åƒ¹
    best_ask_qty = self.best5_data['ask1_qty'] # æœ€ä½³è³£é‡
    
    # FOKè²·ASKè¿½åƒ¹é‚è¼¯
    if best_ask_qty > 0:
        order_price = best_ask  # ç›´æŽ¥ç”¨æœ€ä½³è³£åƒ¹ä¸‹å–®
        print(f"ðŸŽ¯ [STRATEGY] FOKè²·å–®è¿½åƒ¹: {order_price}")
```

### **äº”æª”æ·±åº¦åˆ†æž**
```python
# åˆ†æžè²·è³£å£“åŠ›
total_bid_qty = sum(self.best5_data['bid_qtys'])
total_ask_qty = sum(self.best5_data['ask_qtys'])
pressure_ratio = total_bid_qty / total_ask_qty

if pressure_ratio > 1.2:
    print("ðŸ“ˆ [STRATEGY] è²·ç›¤è¼ƒå¼·")
elif pressure_ratio < 0.8:
    print("ðŸ“‰ [STRATEGY] è³£ç›¤è¼ƒå¼·")
```

## âœ… **æ¸¬è©¦çµæžœ**

### **ç¨‹åºå•Ÿå‹•æ¸¬è©¦**
- âœ… ç¨‹åºæˆåŠŸå•Ÿå‹•
- âœ… Consoleæ¨¡å¼æ­£å¸¸é‹è¡Œ
- âœ… ç‹€æ…‹ç›£è½å™¨æ­£å¸¸å·¥ä½œ
- âœ… ç„¡èªžæ³•æˆ–é‹è¡Œæ™‚éŒ¯èª¤

### **é æœŸåŠŸèƒ½**
- âœ… å§”è¨—å›žå ±é¡žåž‹æ­£ç¢ºè§£æž
- âœ… äº”æª”å ±åƒ¹äº‹ä»¶è™•ç†å°±ç·’
- âœ… å¢žå¼·TICKè¼¸å‡ºæ ¼å¼
- âœ… ç­–ç•¥æ•¸æ“šçµæ§‹å®Œæ•´

## ðŸš€ **ä¸‹ä¸€æ­¥æ¸¬è©¦è¨ˆåŠƒ**

### **å§”è¨—å›žå ±æ¸¬è©¦**
1. **ä¸‹å–®æ¸¬è©¦**
   - [ ] æ¸¬è©¦æ–°å–®å›žå ± (Type='N')
   - [ ] æ¸¬è©¦å–æ¶ˆå›žå ± (Type='C')
   - [ ] æ¸¬è©¦æˆäº¤å›žå ± (Type='M')
   - [ ] é©—è­‰åŽŸå§‹åºè™Ÿé—œè¯

2. **å›žå ±è§£æžæ¸¬è©¦**
   - [ ] ç¢ºèªå§”è¨—é¡žåž‹æ­£ç¢ºé¡¯ç¤º
   - [ ] ç¢ºèªConsoleè©³ç´°è§£æž
   - [ ] ç¢ºèªUIç°¡è¦é¡¯ç¤º

### **äº”æª”å ±åƒ¹æ¸¬è©¦**
1. **äº”æª”æ•¸æ“šæ¸¬è©¦**
   - [ ] ç™»å…¥ä¸¦é€£ç·šå ±åƒ¹
   - [ ] è¨‚é–±MTX00å ±åƒ¹
   - [ ] ç¢ºèªäº”æª”äº‹ä»¶è§¸ç™¼
   - [ ] é©—è­‰äº”æª”æ•¸æ“šçµæ§‹

2. **å¢žå¼·TICKæ¸¬è©¦**
   - [ ] ç¢ºèªTICKåŒ…å«äº”æª”ä¿¡æ¯
   - [ ] æ¸¬è©¦ConsoleæŽ§åˆ¶åŠŸèƒ½
   - [ ] é©—è­‰æ•¸æ“šæ›´æ–°é »çŽ‡

### **ç­–ç•¥æ•´åˆæ¸¬è©¦**
1. **FOKè¿½åƒ¹æ¸¬è©¦**
   - [ ] æ¸¬è©¦æœ€ä½³è³£åƒ¹ç²å–
   - [ ] æ¸¬è©¦è¿½åƒ¹é‚è¼¯
   - [ ] é©—è­‰ä¸‹å–®åƒ¹æ ¼æº–ç¢ºæ€§

2. **äº”æª”åˆ†æžæ¸¬è©¦**
   - [ ] æ¸¬è©¦è²·è³£å£“åŠ›åˆ†æž
   - [ ] æ¸¬è©¦æ·±åº¦æ•¸æ“šè¨ˆç®—
   - [ ] é©—è­‰ç­–ç•¥ä¿¡è™Ÿç”Ÿæˆ

## ðŸ“Š **æŠ€è¡“å„ªå‹¢**

### **å§”è¨—å›žå ±æ”¹é€²**
- âœ… æ­£ç¢ºçš„é¡žåž‹è§£æž
- âœ… è©³ç´°çš„Consoleè¼¸å‡º
- âœ… æ¸…æ™°çš„UIæ‘˜è¦
- âœ… å®Œæ•´çš„éŒ¯èª¤è™•ç†

### **äº”æª”å ±åƒ¹å„ªå‹¢**
- âœ… å¯¦æ™‚äº”æª”æ•¸æ“š
- âœ… çµæ§‹åŒ–æ•¸æ“šå­˜å„²
- âœ… ç­–ç•¥å‹å¥½æŽ¥å£
- âœ… å¯æŽ§åˆ¶è¼¸å‡ºé »çŽ‡

### **ç­–ç•¥æ”¯æ´**
- âœ… FOKè¿½åƒ¹æ•¸æ“šæ”¯æ´
- âœ… å¸‚å ´æ·±åº¦åˆ†æž
- âœ… è²·è³£å£“åŠ›åˆ¤æ–·
- âœ… å³æ™‚åƒ¹æ ¼è¿½è¹¤

## ðŸ“ **ä½¿ç”¨æŒ‡å—**

### **å§”è¨—å›žå ±ç›£æŽ§**
1. **æŸ¥çœ‹è©³ç´°å›žå ±** - æª¢æŸ¥Consoleä¸­çš„ `[REPLY]` æ¨™ç±¤
2. **å¿«é€Ÿç‹€æ…‹ç¢ºèª** - æŸ¥çœ‹UIæ—¥èªŒçš„ç°¡è¦ä¿¡æ¯
3. **éŒ¯èª¤è¿½è¹¤** - æ³¨æ„éŒ¯èª¤ä»£ç¢¼å’Œè¨Šæ¯

### **äº”æª”æ•¸æ“šä½¿ç”¨**
1. **å¯¦æ™‚ç›£æŽ§** - æŸ¥çœ‹Consoleä¸­çš„ `[BEST5]` æ¨™ç±¤
2. **ç­–ç•¥æ•¸æ“š** - ä½¿ç”¨ `self.best5_data` å­—å…¸
3. **è¿½åƒ¹ç­–ç•¥** - åƒè€ƒ `ask1` å’Œ `bid1` åƒ¹æ ¼

### **ConsoleæŽ§åˆ¶**
- ä½¿ç”¨ "ðŸ”‡ é—œé–‰å ±åƒ¹Console" æŒ‰éˆ•æŽ§åˆ¶æ‰€æœ‰å ±åƒ¹è¼¸å‡º
- é—œé–‰å¾Œäº”æª”æ•¸æ“šä»æœƒæ›´æ–°ï¼Œåªæ˜¯ä¸é¡¯ç¤º
- ç­–ç•¥é‚è¼¯ä¸å—ConsoleæŽ§åˆ¶å½±éŸ¿

## ðŸŽ¯ **é‡è¦æé†’**

### **å§”è¨—é¡žåž‹å°ç…§**
- **'N'** = æ–°å–® (New) - å§”è¨—æˆåŠŸé€é”
- **'C'** = å–æ¶ˆ (Cancel) - å§”è¨—è¢«å–æ¶ˆ
- **'M'** = æˆäº¤ (Match) - å§”è¨—æˆäº¤
- **'X'** = åˆªé™¤ (Delete) - å§”è¨—è¢«åˆªé™¤
- **'R'** = éŒ¯èª¤ (Reject) - å§”è¨—è¢«æ‹’çµ•

### **äº”æª”æ•¸æ“šç‰¹æ€§**
- æ¯2ç§’æ›´æ–°ä¸€æ¬¡Consoleè¼¸å‡º
- æ•¸æ“šçµæ§‹å¯¦æ™‚æ›´æ–°
- åƒ¹æ ¼å·²è½‰æ› (é™¤ä»¥100)
- åŒ…å«å®Œæ•´è²·è³£äº”æª”

---

**ðŸ“ å ±å‘Šå»ºç«‹æ™‚é–“**: 2025-07-04  
**ðŸŽ¯ å‡ç´šç‹€æ…‹**: æˆåŠŸå®Œæˆ  
**ðŸ’¡ ä¸‹ä¸€æ­¥**: é€²è¡Œå§”è¨—å›žå ±å’Œäº”æª”åŠŸèƒ½æ¸¬è©¦  
**ðŸ“Š å ±å‘Šç‰ˆæœ¬**: v1.0
